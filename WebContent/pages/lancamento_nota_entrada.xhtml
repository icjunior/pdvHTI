<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui"
	template="/WEB-INF/template_erp.xhtml">

	<ui:define name="subheader">
        Lançamento de nota fiscal de entrada
    </ui:define>

	<ui:define name="content">

		<div class="Container100">
			<div class="ContainerIndent">
				<div class="Card ShadowEffect TexAlLeft">
					<h:form id="formEntradaNota">
						<p:growl id="growl" />
						<p:focus context="formEntradaNota" />
						<p:panel id="pnEntradaNota">
							<p:fieldset legend="Cabeçalho" toggleable="true">
								<p:panelGrid id="pgEntradaCabecalho"
									styleClass="ui-panelgrid-blank" style="width:100%">
									<p:row>
										<p:column>
											<h:outputLabel value="Tipo de nota:" />
										</p:column>
										<p:column>
											<p:outputLabel value="Fornecedor" />
										</p:column>
									</p:row>
									<p:row>
										<p:column>
											<p:selectOneMenu id="tipoNotaList" style="width:125px"
												required="true"
												requiredMessage="Tipo de nota deve ser selecionado">
												<f:selectItem itemLabel="Selecione um"
													noSelectionOption="true" itemDisabled="true" />
												<f:selectItems
													value="#{lancamentoNotaEntradaBean.tiposNota}" var="tipo"
													itemValue="#{tipo}" itemLabel="#{tipo}" />
											</p:selectOneMenu>
										</p:column>
										<p:column>
											<p:inputText id="inCliente"
												value="#{lancamentoNotaEntradaBean.notaCabecalho.cliente.nome}"
												disabled="true" style="width:50%" />
											<p:spacer width="10" />
											<p:commandButton icon="ui-icon-search"
												id="btnPesquisarFornecedor"
												actionListener="#{lancamentoNotaEntradaBean.incluirCliente}"
												process="@this">
												<p:ajax event="dialogReturn"
													listener="#{lancamentoNotaEntradaBean.clienteSelecionado}"
													update="inCliente" />
											</p:commandButton>
										</p:column>
									</p:row>
									<p:row>
										<p:column>
											<h:outputLabel value="NF:" />
										</p:column>
										<p:column>
											<h:outputLabel value="Série:" />
										</p:column>
										<p:column>
											<h:outputLabel value="Valor:" />
										</p:column>
										<p:column>
											<h:outputLabel value="Emissão:" />
										</p:column>
										<p:column>
											<h:outputLabel value="Lançamento:" />
										</p:column>
									</p:row>
									<p:row>
										<p:column>
											<p:inputText
												value="#{lancamentoNotaEntradaBean.notaCabecalho.numero}" />
										</p:column>
										<p:column>
											<p:inputText
												value="#{lancamentoNotaEntradaBean.notaCabecalho.serie}" />
										</p:column>
										<p:column>
											<p:inputNumber decimalPlaces="2" decimalSeparator=","
												symbol="R$ "
												value="#{lancamentoNotaEntradaBean.notaCabecalho.valor}" />
										</p:column>
										<p:column>
											<p:inputMask mask="99/99/9999"
												value="#{lancamentoNotaEntradaBean.notaCabecalho.emissao}"
												converter="#{dateConverter}" />
										</p:column>
										<p:column>
											<p:inputMask mask="99/99/9999"
												value="#{lancamentoNotaEntradaBean.notaCabecalho.lancamento}"
												converter="#{dateConverter}" />
										</p:column>
									</p:row>
								</p:panelGrid>
							</p:fieldset>
							<br />
							<p:fieldset legend="Itens" toggleable="true">
								<p:panelGrid id="pgEntradaItem" styleClass="ui-panelgrid-blank"
									style="width:100%">
									<p:row>
										<p:column>
											<h:outputLabel value="Material:" />
										</p:column>
									</p:row>
									<p:row>
										<p:column>
											<p:inputText readonly="true" style="width:50%" id="inItem"
												value="#{produtoEstoqueBean.produtoAjuste.produto.descricao}" />
											<p:spacer width="10" />
											<p:commandButton icon="ui-icon-search"
												alt="Pesquisa de material"
												actionListener="#{lancamentoNotaEntradaBean.incluirItem}"
												process="@this">
												<p:ajax event="dialogReturn"
													listener="#{lancamentoNotaEntradaBean.produtoSelecionado}"
													update="inItem, itensDT" />
											</p:commandButton>
										</p:column>
									</p:row>
								</p:panelGrid>
								<br />
								<p:dataTable id="itensDT"
									value="#{lancamentoNotaEntradaBean.itens}" var="item"
									emptyMessage="Nenhum item lançado" scrollable="true"
									scrollHeight="250">

									<p:column headerText="EAN">
										<h:outputLabel value="#{item.produto.ean}" />
									</p:column>

									<p:column headerText="Descrição">
										<h:outputLabel value="#{item.produto.descricao}" />
									</p:column>

									<p:column headerText="Embalagem">
										<h:outputLabel value="#{item.embalagem}" />
									</p:column>

									<p:column headerText="Qtd.">
										<h:outputLabel value="#{item.quantidade}" />
									</p:column>

									<p:column headerText="Valor">
										<h:outputLabel value="#{item.valor}" />
									</p:column>
								</p:dataTable>
								<br />
								<p:panelGrid styleClass="ui-panelgrid-blank" style="width:100%">
									<p:row>
										<p:column>
											<h:outputLabel value="Total:" />
										</p:column>
										<p:column>
											<h:outputLabel value="Qtd. itens:" />
										</p:column>
									</p:row>
									<p:row>
										<p:column>
											<p:inputText disabled="true" />
										</p:column>
										<p:column>
											<p:inputText disabled="true" />
										</p:column>
									</p:row>
								</p:panelGrid>
							</p:fieldset>
							<br />
							<p:fieldset legend="Financeiro" toggleable="true">
								<p:dataTable>
									<p:column headerText="Vencimento"></p:column>
									<p:column headerText="Valor"></p:column>
									<p:column headerText="Desconto"></p:column>
									<p:column headerText="Acréscimo"></p:column>
									<p:column headerText="Cód. barras"></p:column>
									<p:column headerText="Ações">
									</p:column>
								</p:dataTable>
								<br />
								<br />
								<p:commandButton value="Incluir financeiro" />
							</p:fieldset>
							<br />
							<br />
							<p:commandButton value="Finalizar nota"
								actionListener="#{lancamentoNotaEntradaBean.gravar}"
								update="growl,pnEntradaNota" />
						</p:panel>
					</h:form>
				</div>
			</div>
		</div>

	</ui:define>

</ui:composition>